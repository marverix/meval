/* meval v0.6.2 | Copyright 2019 (c) Marek Sieroci≈Ñski| https://github.com/marverix/meval/blob/master/LICENSE */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).meval=n()}(this,function(){"use strict";function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var t={NAME:"[A-Za-z$_][A-Za-z0-9$_.]*"};t.METHOD="(".concat(t.NAME,")\\((.*)\\)"),t.PART="".concat(t.NAME,"(?:\\(.*\\))?"),t.PARANTHESIS="(?:^| )\\(([^)]+)\\)",t.THREE_ARG="^.+\\?.+:.+$",t.ACCESSOR="(".concat(t.PART,")\\.(").concat(t.PART,")"),t.STRING='(["\\\'])([^"]*)\\1',t.FLOAT="[0-9]+\\.[0-9]+",t.INTEGER="[0-9]+",t.BOOLEAN="true|false",t.GLOBAL_PROPERTIES="undefined|null|NaN|Infinity";var n={REGEXP:t,ALLOWED_GLOBAL_OBJECTS:["String","Number","Array","Object","Date","Math","location","navigator"],get1ArgOpRegex:function(t){return"^(".concat(t,")(.+)$")},get2ArgOpRegex:function(t){return"^(.+)(".concat(t,")(.+)$")}},a=n.REGEXP,h=n.ALLOWED_GLOBAL_OBJECTS,r=n.get1ArgOpRegex,s=n.get2ArgOpRegex,l="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=["?",":",null];function e(t,n){if("string"!=typeof t)throw new TypeError("Expressions must be a string");this.expression=t,this.context=n,this.run=function(){return this.current=[],this._digest(this.expression)},this._digest=function(t){var n;if(t=t.trim(),null!=(n=this._match3ArgOp(t)))return this._digest(n[1])?this._digest(n[2]):this._digest(n[3]);if(null!=(n=this._match2ArgOp("\\|\\|",t,!1)))return n[1]?n[1]:this._digest(n[3]);if(null!=(n=this._match2ArgOp("&&",t,!1)))return!!n[1]&&this._digest(n[3]);if(null!=(n=this._match2ArgOp("!==",t)))return n[1]!==n[3];if(null!=(n=this._match2ArgOp("===",t)))return n[1]===n[3];if(null!=(n=this._match2ArgOp("!=",t)))return n[1]!=n[3];if(null!=(n=this._match2ArgOp("==",t)))return n[1]==n[3];if(null!=(n=this._match2ArgOp("<=",t)))return n[1]<=n[3];if(null!=(n=this._match2ArgOp(">=",t)))return n[1]>=n[3];if(null!=(n=this._match2ArgOp("<",t)))return n[1]<n[3];if(null!=(n=this._match2ArgOp(">",t)))return n[1]>n[3];if(null!=(n=this._match2ArgOp("-",t)))return n[1]-n[3];if(null!=(n=this._match2ArgOp("\\+",t)))return n[1]+n[3];if(null!=(n=this._match2ArgOp("%",t)))return n[1]%n[3];if(null!=(n=this._match2ArgOp("\\/",t)))return n[1]/n[3];if(null!=(n=this._match2ArgOp("\\*",t)))return n[1]*n[3];if(null!=(n=this._match1ArgOp("!",t)))return!n[2];if(null!=(n=this._match1ArgOp("typeof",t)))return u(n[2]);if(null!=(n=t.match(new RegExp(a.PARANTHESIS))))return this._digest(n[1]);if(null!=(n=t.match(new RegExp(a.ACCESSOR)))){var e=this._digest(n[1]),r=n[2];if(null==(n=r.match(new RegExp(a.METHOD))))return e[r];for(var i=n[2].split(","),s=0;s<i.length;s++)i[s]=this._digest(i[s]);return e[n[1]].apply(e,i)}if(null!=(n=t.match(new RegExp(a.GLOBAL_PROPERTIES))))switch(n[0]){case"null":return null;case"NaN":return NaN;case"Infinity":return 1/0;default:return}return null!=(n=t.match(new RegExp(a.BOOLEAN)))?"true"==n[0]:null!=(n=t.match(new RegExp(a.STRING)))?n[2]:null!=(n=t.match(new RegExp(a.FLOAT)))?parseFloat(n[0]):null!=(n=t.match(new RegExp(a.INTEGER)))?parseInt(n[0]):-1<h.indexOf(t)?l[t]:this.context[t]},this._match1ArgOp=function(t,n){var e=n.match(new RegExp(r(t)));return null!=e&&(e[2]=this._digest(e[2])),e},this._match2ArgOp=function(t,n,e){var r=!(2<arguments.length&&void 0!==e)||e,i=n.match(new RegExp(s(t)));if(null!=i){if(this._hasLostParanthesis(i[1])||this._hasLostParanthesis(i[3]))return null;i[1]=this._digest(i[1]),i[3]=r?this._digest(i[3]):i[3]}return i},this._match3ArgOp=function(t){if("string"!=typeof t||!new RegExp(a.THREE_ARG).test(t))return null;for(var n,e=0,r=[{match:"",paranthesis:0},{match:"",paranthesis:0},{match:"",paranthesis:0}],i=0;i<t.length;i++)n=t[i],null!=c[e]&&n===c[e]&&0===r[e].paranthesis?e++:("("===n?r[e].paranthesis++:")"===n&&r[e].paranthesis--,r[e].match+=n);if(r[0].paranthesis||r[1].paranthesis||r[2].paranthesis)return null;for(var s=[t],u=0;u<3;u++)s.push(this._stripParanthesis(r[u].match));return s},this._hasLostParanthesis=function(t){var n=t.match(/\(/g);n=null==n?0:n.length;var e=t.match(/\)/g);return n!==(e=null==e?0:e.length)},this._stripParanthesis=function(t){var n=t.match(/^\s*\(\s*(.+)\s*\)\s*$/);return null==n?t:n[1]}}return function(t){return new e(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).run()}});
